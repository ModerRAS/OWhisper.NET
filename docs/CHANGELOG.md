# 更新日志 (CHANGELOG)

本文档记录 OWhisper.NET 项目的所有重要变更。

日志格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
项目版本遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 新增功能 ✨

#### 队列识别系统
- **批量处理管理器**: 新增专用的队列管理窗口，支持批量音频文件处理
- **多文件导入**: 支持一次性选择多个音频文件或整个文件夹
- **智能文件扫描**: 自动识别文件夹中的所有支持音频格式
- **实时进度监控**: 显示每个任务的详细状态和处理进度
- **自动文件组织**: 按日期自动创建子文件夹存储转录结果
- **队列控制**: 支持开始、暂停、恢复和取消任务操作
- **状态可视化**: 用颜色区分不同的任务状态（等待、处理中、完成、失败）

#### 托盘菜单优化
- **新增**: "队列识别" 菜单项，快速访问批量处理功能
- **新增**: "模型管理" 菜单项，提供可视化模型管理界面 🆕
- **精简**: 移除"下载更新"菜单项，简化用户界面
- **保留**: "检查更新"功能，提供一键检查和安装更新

#### 模型管理系统 🆕
- **可视化管理界面**: 新增专用的模型管理窗口，提供直观的模型管理体验
- **手动模型下载**: 支持从界面选择和下载不同版本的Whisper模型
- **浏览器下载支持**: 新增"在浏览器中下载"选项，利用浏览器下载管理器处理大文件 🆕
- **本地文件导入**: 支持导入本地的.bin和.gguf格式模型文件
- **模型状态监控**: 实时显示当前模型状态、文件大小和完整性验证
- **多版本支持**: 支持Large V3 Turbo、Large V3、Medium、Small等多个模型版本
- **文件管理**: 提供删除、刷新状态、打开文件夹等便捷操作
- **下载进度显示**: 实时显示下载进度、速度和状态信息
- **完整性验证**: 自动验证下载文件的SHA256校验和

### 技术改进 🔧

#### 用户界面增强
- **QueueManagerForm**: 新增批量处理管理窗口类
- **响应式设计**: 支持窗口缩放和自适应布局
- **状态统计**: 实时显示队列统计信息（总计、已完成、失败等）
- **文件路径预览**: 显示转录结果的保存路径

#### 后端服务
- **任务队列集成**: 与现有的 TranscriptionQueueService 完美集成
- **事件驱动**: 使用观察者模式实时更新UI状态
- **资源管理**: 优化内存使用，及时清理已完成任务数据
- **错误处理**: 增强的异常处理和错误恢复机制

### 文件格式支持 📁

#### 音频格式
- ✅ WAV (无损，推荐)
- ✅ MP3 (压缩格式)
- ✅ FLAC (无损压缩)
- ✅ OGG (开源格式)
- ✅ M4A (Apple格式)
- ✅ WMA (Windows媒体)
- ✅ AAC (高级音频编码)

#### 输出格式
- ✅ TXT (纯文本)
- ✅ 智能文件命名
- ✅ UTF-8 编码支持
- ✅ 按日期自动分类

### 文档更新 📖

#### 新增文档
- **队列识别功能说明**: 详细的使用指南和功能介绍
- **模型管理功能说明**: 完整的模型管理操作指南 🆕
- **更新日志**: 记录所有重要变更和新功能

#### 文档改进
- **README.md**: 更新功能特性介绍，添加模型管理部分
- **功能演示**: 添加队列识别和模型管理功能的使用说明
- **故障排除**: 补充批量处理和模型管理相关的问题解决方案

### 破坏性变更 ⚠️

#### 托盘菜单
- **移除**: "下载更新" 菜单项
  - **影响**: 用户需要通过"检查更新"来获取和安装更新
  - **迁移**: 更新流程合并到检查更新功能中，用户体验更简化

### 已知问题 🐛

#### 功能限制
- 队列处理为单线程模式，一次只能处理一个音频文件
- 大文件处理时可能占用较多系统资源
- 暂不支持拖拽文件到队列窗口（计划在后续版本中添加）
- 模型管理窗口当前不支持同时下载多个模型 🆕
- 模型切换需要重启应用才能生效 🆕

#### 兼容性
- 队列管理窗口需要 .NET Framework 4.8 支持
- 模型管理功能需要 .NET Framework 4.8 支持 🆕
- 在低内存系统上处理大文件队列可能较慢
- 大模型（如Large V3）在资源受限环境下可能导入较慢 🆕

---

## [1.0.0] - 2024-01-XX

### 初始版本
- 基础的音频转录功能
- Windows Forms 图形界面
- RESTful API 服务
- 多音频格式支持
- 实时进度显示
- 自动模型下载和管理

---

**说明**: 
- 🆕 = 新功能
- 🔧 = 改进
- 🐛 = 修复
- ⚠️ = 重要变更
- 📖 = 文档更新 